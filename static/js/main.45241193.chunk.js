(this["webpackJsonpsurvey-builder"]=this["webpackJsonpsurvey-builder"]||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),s=a.n(i),l=(a(80),a(45),a(9)),o=a(12),c=a(63),u=a(7),h=Object(u.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(c.a)(e,["component","auth"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/login"})}}))})),p=a(31),m=a.n(p),d=a(11),f=a.n(d),b=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},g=function(e){return{type:"SET_CURRENT_USER",payload:e}},v=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(g({}))}},E=a(20),y=a(60),C=a(13),k=a(105),x={isAuthenticated:!1,user:{},loading:!1},O={},S=a(19),j={studyName:"",dbInfo:[],studyInfo:[],colData:[],colsData:[],colNames:[],fileName:""},N=Object(E.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(C.a)(Object(C.a)({},e),{},{isAuthenticated:!k(t.payload),user:t.payload});case"USER_LOADING":return Object(C.a)(Object(C.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},dataFlow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STUDY_NAME":return Object(C.a)(Object(C.a)({},e),{},{studyName:t.payload});case"GET_DB_INFO":return Object(C.a)(Object(C.a)({},e),{},{dbInfo:t.payload});case"GET_STUDY_INFO":return Object(C.a)(Object(C.a)({},e),{},{studyInfo:t.payload});case"GET_COL_DATA":return Object(C.a)(Object(C.a)({},e),{},{colData:t.payload});case"GET_COLS_DATA":return Object(C.a)(Object(C.a)({},e),{},{colsData:[].concat(Object(S.a)(e.colsData),[t.payload])});case"GET_COL_NAMES":return Object(C.a)(Object(C.a)({},e),{},{colNames:t.payload});case"STORE_FILENAME":return Object(C.a)(Object(C.a)({},e),{},{fileName:t.payload});default:return e}}}),R=[y.a],w=Object(E.e)(N,{},Object(E.d)(E.a.apply(void 0,R))),D=a(2),I=a(3),T=a(4),F=a(1),A=a(6),V=a(5),M=(a(106),function(e,t){return function(a){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info/studyName-"+t).then((function(e){a({type:"GET_STUDY_INFO",payload:e.data.experiments})}))}}),P=function(e,t){return function(a){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/"+t).then((function(e){a({type:"GET_COL_DATA",payload:e.data})}))}},q=function(e){return function(t){f.a.get("https://test-api-615.herokuapp.com/api/"+e+"/collections").then((function(e){t({type:"GET_COL_NAMES",payload:e.data})}))}},L=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).selectRef=r.a.createRef(),n.importQRef=r.a.createRef(),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.username,t=this.props.studyName;this.props.getStudyInfo(e,t)}},{key:"mapQTypetoQKey",value:function(e){switch(e){case"slider":return"slider-question-key";case"static-text":return"static-text-key";case"normal-curve":return"normal-curve-question-key";case"threshold":return"threshold-key";default:return""}}},{key:"render",value:function(){var e,t=this,a={};if(0==!this.props.experiments.length){var n=this.props.experiments;console.log(n);var i=function(e){return r.a.createElement("option",{value:e},e)};e=n.map((function(e){var n=Object.keys(e).filter((function(e){return"q"==e.charAt(0)})),s=[];n.forEach((function(a){var n=e[a],r=n[t.mapQTypetoQKey(n.Type)];s.push(r)})),s.map((function(t){return a[t]=e.exptName}));var l=s.map(i);return r.a.createElement("optgroup",{label:e.exptName},l)}))}return r.a.createElement("div",{className:"unit"},r.a.createElement("span",null,"Choose what element to add next"),r.a.createElement("br",null),r.a.createElement("select",{name:"tabType",id:"tabType",ref:this.selectRef},r.a.createElement("option",{value:"static-text"},"Static Text"),r.a.createElement("option",{value:"normal-curve"},"Normal Curve"),r.a.createElement("option",{value:"threshold"},"Threshold")),r.a.createElement("button",{onClick:function(){return t.props.build(t.selectRef.current.value)}},"+"),r.a.createElement("br",null),r.a.createElement("br",null),"OR",r.a.createElement("br",null),r.a.createElement("br",null),0==this.props.experiments.length?r.a.createElement("div",null,"Cannot import question from another experiment because there are no experiments in this study yet."):r.a.createElement("div",null,r.a.createElement("span",null,"Import a question from another experiment in this study"),r.a.createElement("br",null),r.a.createElement("select",{name:"importQue",id:"importQue",ref:this.importQRef},e),r.a.createElement("button",{onClick:function(){return t.props.importQuestion(a[t.importQRef.current.value],t.importQRef.current.value)}},"+")))}}]),a}(n.Component),Q=Object(u.b)((function(e){return{experiments:e.dataFlow.studyInfo}}),{getStudyInfo:M})(L),_=(a(107),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).sliderRef=r.a.createRef(),n.outputRef=r.a.createRef(),n.qRef=r.a.createRef(),n.minRef=r.a.createRef(),n.maxRef=r.a.createRef(),n.state={min:1,max:100},n.keyRef=r.a.createRef(),n.state={checked:!1,minVal:Number,maxVal:Number},n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n.appendToKeysArr=n.appendToKeysArr.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"getCount",value:function(){this.props.getCount(this.props.count)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"componentDidMount",value:function(){this.props.imported&&(this.handleChange("Question",this.props.defaultQ,this.props.count),this.handleChange("lowRange",this.props.defaultMin,this.props.count),this.handleChange("highRange",this.props.defaultMax,this.props.count))}},{key:"appendToKeysArr",value:function(e,t,a,n){this.props.appendToKeysArr(e,t,a,n)}},{key:"render",value:function(){var e=this,t=this.props.count+1;return r.a.createElement("form",{className:"unit"},r.a.createElement("br",null),"Question #",t,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Enter your question below:",r.a.createElement("br",null),r.a.createElement("input",{onInput:function(){return e.handleChange("Question",e.qRef.current.value,e.props.count)},ref:this.qRef,type:"text",defaultValue:this.props.defaultQ})),r.a.createElement("br",null),r.a.createElement("input",{type:"range",min:"1",max:"100",defaultValue:"50",className:"slider",name:"myRange",id:"myRange",ref:this.sliderRef}),this.state.maxVal," ",r.a.createElement("br",null),r.a.createElement("p",null,"Minimum:",r.a.createElement("input",{onInput:function(){return e.handleChange("lowRange",e.minRef.current.value,e.props.count)},ref:this.minRef,type:"text",defaultValue:this.props.defaultMin})),r.a.createElement("br",null),r.a.createElement("p",null,"Maximum: ",r.a.createElement("input",{onInput:function(){return e.handleChange("highRange",e.maxRef.current.value,e.props.count)},ref:this.maxRef,type:"text",defaultValue:this.props.defaultMax})),r.a.createElement("br",null),r.a.createElement("br",null),"What csv column name do you want to assign to this question? ",r.a.createElement("br",null),r.a.createElement("b",null,"Please use letters only, and the name must be unique.")," ",r.a.createElement("br",null),"Recommedation: include your experiment name, this question number (",t,"), and the question type (slider)",r.a.createElement("br",null),r.a.createElement("input",{type:"text",ref:this.keyRef,onInput:function(){e.handleChange("slider-question-key",e.keyRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.delete.bind(this)},"Delete"))}}]),a}(n.Component)),B=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).qRef=r.a.createRef(),n.keyRef=r.a.createRef(),n.state={},n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"getCount",value:function(){this.props.getCount(this.props.count)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"componentDidMount",value:function(){this.props.imported&&this.handleChange("Static Text",this.props.defaultText,this.props.count)}},{key:"render",value:function(){var e=this,t=this.props.count+1;return r.a.createElement("form",{className:"unit"},r.a.createElement("br",null),"Question #",t,r.a.createElement("br",null),"Enter your static text below: ",r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",rows:"10",ref:this.qRef,defaultValue:this.props.defaultText,onInput:function(){return e.handleChange("Static Text",e.qRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("br",null),"What csv column name do you want to assign to this question? ",r.a.createElement("br",null),r.a.createElement("b",null,"Please use letters only, and the name must be unique.")," ",r.a.createElement("br",null),"Recommedation: include your experiment name, this question number (",t,"), and the question type (staticText)",r.a.createElement("br",null),r.a.createElement("input",{type:"text",ref:this.keyRef,onInput:function(){return e.handleChange("static-text-key",e.keyRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.delete.bind(this)},"Delete"))}}]),a}(n.Component),J=a(33),U=(a(55),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).sliderRef=r.a.createRef(),n.rectRef=r.a.createRef(),n.svgRef=r.a.createRef(),n.areaRef=r.a.createRef(),n.lengthRef=r.a.createRef(),n.startPos1Ref=r.a.createRef(),n.startPos2Ref=r.a.createRef(),n.graph1keyRef=r.a.createRef(),n.graph2keyRef=r.a.createRef(),n.qRef=r.a.createRef(),n.colNumValRef=r.a.createRef(),n.radiusRef=r.a.createRef(),n.ticksRef=r.a.createRef(),n.checkBoxRef=r.a.createRef(),n.questionKeyRef=r.a.createRef(),n.legendKey1Ref=r.a.createRef(),n.legendKey2Ref=r.a.createRef(),n.dotReturn=n.dotReturn.bind(Object(F.a)(n)),n.curveArea=n.curveArea.bind(Object(F.a)(n)),n.triMouseDown=n.triMouseDown.bind(Object(F.a)(n)),n.triDrag=n.triDrag.bind(Object(F.a)(n)),n.triUp=n.triUp.bind(Object(F.a)(n)),n.curveArea=n.curveArea.bind(Object(F.a)(n)),n.lengthSubmit=n.lengthSubmit.bind(Object(F.a)(n)),n.toggleXVals=n.toggleXVals.bind(Object(F.a)(n)),n.alterStartPos1=n.alterStartPos1.bind(Object(F.a)(n)),n.alterStartPos2=n.alterStartPos2.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n.svgColReturn=n.svgColReturn.bind(Object(F.a)(n)),n.svgColReturn=n.svgColReturn.bind(Object(F.a)(n)),n.establishStateData=n.establishStateData.bind(Object(F.a)(n)),n.updateRadius=n.updateRadius.bind(Object(F.a)(n)),n.updateTicks=n.updateTicks.bind(Object(F.a)(n)),n.checkChange=n.checkChange.bind(Object(F.a)(n)),n.state=n.establishStateData(n.props.data),n}return Object(T.a)(a,[{key:"establishStateData",value:function(e){var t=e["max-height"],a=e["circle-radius"],n=e.len1,r=e.len2,i=4*a-1,s=50*(Math.ceil(i*t/50)+1),l=e["axis-length"],o=l*i,c=Math.ceil(Math.max(n,r)/2),u=Math.max(n,r)*i,h=s-50,p=u+o,m=(Math.ceil(p/i),Math.ceil(u/2)),d=c,f=p-((n/2+1)*i+(r/2+1)*i-1),b=o/i,g=b*i,v=(.5*n+1)*i,E=(.5*r+1)*i,y=Math.ceil(v/i),C=Math.ceil(E/i),k=Math.abs(Math.ceil(n/2)-d),x=Math.abs(Math.ceil(r/2)-d),O=e.startPos1,S=O+k-1,j=O,N=O+n-1;j+y<d?(S=k-1,j=0,N=n-1):j+y>d+b&&(S=k+b-1,j=b,N=b+n-1);var R,w,D,I,T=e.startPos2,F=T+x-1,A=T,V=T+r-1;A+C<d?(F=x-1,A=0,V=r-1):A+C>d+b&&(F=x+b-1,A=b,V=b+r-1);var M,P=l*(R="colNumVal"in e?this.props.data.colNumVal:1);return"tickNum"in e&&P%(parseInt(e.tickNum)+1)===0?(D=l*i/((w=parseInt(e.tickNum))+1),I=P/(w+1)):(w=0,D=P,I=P),M=!("edgeLim"in e)||e.edgeLim,{axisLength:e["axis-length"],startPos1:e.startPos1,startPos2:e.startPos2,x:0,y:0,isDown:!1,rectX:12.5,down:!1,svgWidth:p,svgHeight:s,svgX:6,len1:n,colValHeiS:e.colValHeiS,len2:r,colValHeiS2:e.colValHeiS2,distancing:i,distancing1:S*i,distancing2:F*i,triCent1:y*i,triCentCol1:y,triCent2:C*i,triCentCol2:C,mousePointerRange:0,triDown:!1,col11:j,col12:N,col21:A,col22:V,colLim1:Math.round((p-n*i)/i),colLim2:Math.round((p-r*i)/i),overlapVals:e.overlapVals,circRad:a,ceilDist:h,axisStart:m,axisStartCol:d,axisWidth:f,axisEnd:g,axisEndCol:b,edgeCol:c,edgeLength:u,colNum:l,variance1:k,variance2:x,lowVal:this.props.data.lowVal,showCoors:!0,colNumVal:R,tickNum:w,tickDist:D,rangeVal:I,edgeLim:M}}},{key:"dotReturn",value:function(e,t){var a=e,n=this.state.distancing1+this.state.distancing*a+10,i=this.state.ceilDist-this.state.distancing*t+10;return r.a.createElement("circle",{className:"icon",stroke:"DarkCyan",fill:"DarkCyan",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:i,r:this.state.circRad})}},{key:"dotReturn2",value:function(e,t){var a=e,n=this.state.distancing2+this.state.distancing*a+10,i=this.state.ceilDist-this.state.distancing*t+10;return r.a.createElement("circle",{className:"icon",stroke:"Crimson",fill:"Crimson",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:i,r:this.state.circRad})}},{key:"svgColReturn",value:function(e,t){var a,n;1===t?(a=this.state.triCentCol1,n=this.state.variance1):2===t&&(a=this.state.triCentCol2,n=this.state.variance2);var r=this.svgRef.current,i=r.createSVGPoint();i.x=e.clientX;var s=i.matrixTransform(r.getScreenCTM().inverse());e.preventDefault();var l=s.x-a+this.state.mousePointerRange;return[Math.round((l-this.state.axisStart)/this.state.distancing)+n,Math.round((l-this.state.axisStart)/this.state.distancing)+1]}},{key:"svgColPlacement",value:function(e,t,a){if(this.state.edgeLim){if(2===a){var n=this.state.axisStartCol-this.state.variance2;if(e<this.state.axisStartCol-1)this.setState({distancing2:(this.state.axisStartCol-1)*this.state.distancing,col21:0,col22:this.state.len2-1});else if(e+this.state.len2+1>this.state.axisStartCol+this.state.axisEndCol){var r=this.state.axisEndCol-this.state.len2;this.setState({distancing2:this.state.distancing*(this.state.axisStartCol+r-1),col21:r,col22:r+this.state.len2-1})}else this.setState({distancing2:this.state.distancing*e,col21:t-n,col22:t-n+this.state.len2-1});this.curveArea()}else if(1===a){var i=this.state.axisStartCol-this.state.variance1;if(e<this.state.axisStartCol-1)this.setState({distancing1:(this.state.axisStartCol-1)*this.state.distancing,col11:0,col12:this.state.len1-1});else if(e+this.state.len1+1>this.state.axisStartCol+this.state.axisEndCol){var s=this.state.axisEndCol-this.state.len1;this.setState({distancing1:this.state.distancing*(this.state.axisStartCol+s-1),col11:s,col12:s+this.state.len1-1})}else this.setState({distancing1:this.state.distancing*e,col11:t-i,col12:t-i+this.state.len1-1});this.curveArea()}}else 2===a?(e+this.state.triCentCol2<this.state.axisStartCol?this.setState({distancing2:(this.state.variance2-1)*this.state.distancing,col21:0,col22:this.state.len2-1}):e+this.state.triCentCol2>this.state.axisStartCol+this.state.axisEndCol?this.setState({distancing2:this.state.distancing*(this.state.variance2+this.state.axisEndCol-1),col21:this.state.axisEndCol,col22:this.state.axisEndCol+this.state.len2-1}):this.setState({distancing2:this.state.distancing*e,col21:t,col22:t+this.state.len2-1}),this.curveArea()):1===a&&(e+this.state.triCentCol1<this.state.axisStartCol?this.setState({distancing1:(this.state.variance1-1)*this.state.distancing,col11:0,col12:this.state.len1-1}):e+this.state.triCentCol1>this.state.axisStartCol+this.state.axisEndCol?this.setState({distancing1:this.state.distancing*(this.state.variance1+this.state.axisEndCol-1),col11:this.state.axisEndCol,col12:this.state.axisEndCol+this.state.len1-1}):this.setState({distancing1:this.state.distancing*e,col11:t,col12:t+this.state.len1-1}),this.curveArea())}},{key:"triMouseDown",value:function(e,t){var a=this;if("mousedown"===e.type){e.preventDefault();var n=this.svgRef.current,r=n.createSVGPoint();r.x=e.clientX;var i=r.matrixTransform(n.getScreenCTM().inverse());1===t?this.setState((function(e){return{triDown:t,mousePointerRange:e.triCent1+a.state.distancing1-i.x}})):2===t&&this.setState((function(e){return{triDown:t,mousePointerRange:e.triCent2+a.state.distancing2-i.x}}))}}},{key:"triDrag",value:function(e){e.preventDefault();var t=this.state.triDown,a=this.svgColReturn(e,t),n=a[0],r=a[1];this.svgColPlacement(n,r,t),this.curveArea()}},{key:"triUp",value:function(e){this.state.triDown&&this.setState({triDown:!1})}},{key:"curveArea",value:function(){var e,t,a,n;this.state.edgeLim?(e=this.state.col11,t=this.state.col12,a=this.state.col21,n=this.state.col22):(e=this.state.col11+this.state.variance1,t=this.state.col12+this.state.variance1,a=this.state.col21+this.state.variance2,n=this.state.col22+this.state.variance2),this.areaRef.current.innerHTML=e>n||t<a?0:this.state.overlapVals[Math.abs(n-e)]}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"changeJSON",value:function(e,t){this.props.changeJSON(e,t)}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"componentDidMount",value:function(){console.log(this.props.data.edgeLim),this.props.imported&&(this.handleChange("Question",this.props.qToDisplay.Question,this.props.count),this.handleChange("graph1key",this.props.qToDisplay.graph1key,this.props.count),this.handleChange("grpah2key",this.props.qToDisplay.graph2key,this.props.count))}},{key:"lengthSubmit",value:function(e){var t=(e=this.lengthRef.current.value)*this.state.distancing,a=this.state.edgeLength+t,n=t/this.state.distancing,r=n*this.state.distancing;console.log(n),this.changeJSON("axis-length",e),this.setState({colNum:e,svgWidth:a,axisEndCol:n,axisEnd:r})}},{key:"toggleXVals",value:function(){this.setState((function(e){return{showCoors:!e.showCoors}}))}},{key:"alterStartPos1",value:function(e){var t=parseInt(this.startPos1Ref.current.value)+this.state.variance1-1,a=t-this.state.variance1+1,n=a+this.state.len1-1;t+this.state.triCentCol1<this.state.axisStartCol?(t=this.state.variance1-1,a=0,n=this.state.len1-1):t+this.state.triCentCol1>this.state.axisStartCol+this.state.axisEndCol&&(t=this.state.variance1+this.state.axisEndCol-1,a=this.state.axisEndCol,n=this.state.axisEndCol+this.state.len1-1),this.changeJSON("startPos1",e),this.setState({distancing1:t*this.state.distancing,col11:a,col12:n})}},{key:"alterStartPos2",value:function(e){var t=parseInt(this.startPos2Ref.current.value)+this.state.variance2-1,a=t-this.state.variance2+1,n=a+this.state.len2-1;t+this.state.triCentCol2<this.state.axisStartCol?(t=this.state.variance2-1,a=0,n=this.state.len2-1):t+this.state.triCentCol2>this.state.axisStartCol+this.state.axisEndCol&&(t=this.state.variance2+this.state.axisEndCol-1,a=this.state.axisEndCol,n=this.state.axisEndCol+this.state.len2-1),this.changeJSON("startPos2",e),this.setState({distancing2:t*this.state.distancing,col21:a,col22:n})}},{key:"updateRadius",value:function(e){this.changeJSON("circle-radius",parseInt(e));var t=this.props.data;t["circle-radius"]=parseInt(e),this.setState(this.establishStateData(t))}},{key:"updateTicks",value:function(e){this.changeJSON("tickNum",parseInt(e));var t=this.props.data;t.tickNum=parseInt(e),this.setState(this.establishStateData(t))}},{key:"updateColVal",value:function(e){this.changeJSON("colNumVal",e),this.setState({colNumVal:e})}},{key:"checkChange",value:function(){var e=this;this.setState((function(t){return e.changeJSON("edgeLim",!Boolean(t.edgeLim)),{edgeLim:Number(!Boolean(t.edgeLim))}})),console.log(this.state.edgeLim)}},{key:"render",value:function(){var e=this,t=this.props.count+1,a=function(t){return e.props.qToDisplay?e.props.qToDisplay[t]:""},n=function(t){return e.props.qToDisplay?e.props.qToDisplay.FileContent[t]:""};return r.a.createElement("div",{onMouseMove:function(t){return e.triDrag(t)},onMouseUp:function(t){return e.triUp(t)}},r.a.createElement("svg",{width:this.state.svgWidth,height:this.state.svgHeight+10,ref:this.svgRef},Object(S.a)(Array(this.state.len1).keys()).map((function(t){return Object(S.a)(Array(e.state.colValHeiS[t]).keys()).map((function(a){return e.dotReturn(t,a)}))})),Object(S.a)(Array(this.state.len2).keys()).map((function(t){return Object(S.a)(Array(e.state.colValHeiS2[t]).keys()).map((function(a){return e.dotReturn2(t,a)}))})),r.a.createElement("rect",{width:this.state.axisEnd,height:"2",fill:"black",x:this.state.axisStart-1,y:this.state.ceilDist+20}),r.a.createElement("rect",{width:"2",height:"20",fill:"black",x:this.state.axisStart-1,y:this.state.ceilDist+20}),r.a.createElement("rect",{width:"2",height:"20",fill:"black",x:this.state.axisEnd+this.state.axisStart-1,y:this.state.ceilDist+20}),Object(S.a)(Array(this.state.tickNum).keys()).map((function(t){return r.a.createElement("rect",{width:"2",height:"20",fill:"black",x:e.state.axisStart+e.state.tickDist*(t+1)-1,y:e.state.ceilDist+20})})),Object(S.a)(Array(this.state.tickNum).keys()).map((function(t){return r.a.createElement("text",{textAnchor:"middle",x:e.state.axisStart+e.state.tickDist*(t+1)-1,y:e.state.ceilDist+55},e.state.lowVal+e.state.rangeVal*(t+1))})),r.a.createElement("polygon",{points:[[this.state.triCent1+this.state.distancing1-15,this.state.ceilDist+35],[this.state.triCent1+this.state.distancing1+15,this.state.ceilDist+35],[this.state.triCent1+this.state.distancing1,this.state.ceilDist+20]],onMouseDown:function(t,a){return e.triMouseDown(t,1)}}),r.a.createElement("polygon",{points:[[this.state.triCent2+this.state.distancing2-15,this.state.ceilDist+35],[this.state.triCent2+this.state.distancing2+15,this.state.ceilDist+35],[this.state.triCent2+this.state.distancing2,this.state.ceilDist+20]],onMouseDown:function(t,a){return e.triMouseDown(t,2)}}),r.a.createElement("text",{textAnchor:"middle",x:this.state.axisStart,y:this.state.ceilDist+55},this.state.lowVal),r.a.createElement("text",{textAnchor:"middle",x:this.state.axisStart+this.state.axisEnd,y:this.state.ceilDist+55},this.state.lowVal+this.state.colNum*this.state.colNumVal),"Sorry, please use a different browser."),r.a.createElement("br",null),r.a.createElement("div",{class:"boxed"},r.a.createElement("div",{class:"flex-container"},r.a.createElement("div",{class:"flex-child-one"},"Question: ",r.a.createElement("br",null),r.a.createElement("textarea",{class:"normal-curve-text",cols:"60",rows:"11",ref:this.qRef,defaultValue:a("Question"),onInput:function(){return e.handleChange("Question",e.qRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{class:"color-box",style:{backgroundColor:"DarkCyan"}}),r.a.createElement("input",{type:"text",ref:this.graph1keyRef,defaultValue:a("graph1key"),onInput:function(){return e.handleChange("graph1key",e.graph1keyRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("div",{class:"color-box",style:{backgroundColor:"Crimson"}}),r.a.createElement("input",{type:"text",ref:this.graph2keyRef,defaultValue:a("graph2key"),onInput:function(){return e.handleChange("graph2key",e.graph2keyRef.current.value,e.props.count)}})),r.a.createElement("div",{class:"flex-child-two"},r.a.createElement("br",null),"What csv column name do you want to assign to this question?",r.a.createElement("br",null),r.a.createElement("input",{type:"text",ref:this.questionKeyRef,onInput:function(){return e.handleChange("normal-curve-question-key",e.questionKeyRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("b",null,"Use letters only, and the name must be unique.")," ",r.a.createElement("br",null),"Recommedation: include your experiment name, this question number (",t,"), and the question type (normalCurve)",r.a.createElement("br",null),r.a.createElement("br",null),"Please enter the csv column names for the graph key: ",r.a.createElement("br",null),"(the same rule applies) ",r.a.createElement("br",null),r.a.createElement("div",{class:"color-box",style:{backgroundColor:"DarkCyan"}}),r.a.createElement("input",{type:"text",ref:this.legendKey1Ref,onInput:function(){return e.handleChange("normal-curve-legend-key1",e.legendKey1Ref.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("div",{class:"color-box",style:{backgroundColor:"Crimson"}}),r.a.createElement("input",{type:"text",ref:this.legendKey2Ref,onInput:function(){return e.handleChange("normal-curve-legend-key2",e.legendKey2Ref.current.value,e.props.count)}}))),r.a.createElement("div",{className:"flex-child-three"},r.a.createElement("span",null,"Enter the width of the graph (each point in the curves is equivalent to 1 unit of width) "),r.a.createElement("input",{ref:this.lengthRef,type:"text",defaultValue:n("axis-length")}),r.a.createElement("button",{onClick:function(){e.lengthSubmit(e.lengthRef.current.value)}},"Change Width"),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your preferred value for the width of each unit in the curve"),r.a.createElement("input",{type:"text",ref:this.colNumValRef,defaultValue:n("colNumVal")}),r.a.createElement("button",{onClick:function(){return e.updateColVal(e.colNumValRef.current.value)}},"Change Unit Value"),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your preferred value for the radius of each unit in the curve (2 - 5, inclusive)"),r.a.createElement("input",{type:"text",ref:this.radiusRef,defaultValue:n("circle-radius")}),r.a.createElement("button",{onClick:function(){return e.updateRadius(e.radiusRef.current.value)}},"Change Radius"),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your preferred number of ticks on the graph (equal parts must be divisible by x-axis width)"),r.a.createElement("input",{type:"text",ref:this.ticksRef,defaultValue:n("tickNum")}),r.a.createElement("button",{onClick:function(){return e.updateTicks(e.ticksRef.current.value)}},"Change Tick Count"),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your preferred starting position for curve 1, if you want to change it "),r.a.createElement("input",{ref:this.startPos1Ref,type:"text",defaultValue:n("startPos1")}),r.a.createElement("button",{onClick:function(){return e.alterStartPos1(e.state.startPos1)}},"Change Curve 1"),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your preferred starting position for curve 2, if you want to change it "),r.a.createElement("input",{ref:this.startPos2Ref,type:"text",defaultValue:n("startPos2")}),r.a.createElement("button",{onClick:function(){return e.alterStartPos2(e.state.startPos2)}},"Change Curve 2"),r.a.createElement("br",null),"1"==this.props.data.edgeLim.toString()?r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"vehicle1",name:"vehicle1",value:"Bike",ref:this.checkBoxRef,onChange:this.checkChange,checked:!0}),r.a.createElement("label",{for:"vehicle1"},"Turn edge limiting on/off")):r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"vehicle1",name:"vehicle1",value:"Bike",ref:this.checkBoxRef,onChange:this.checkChange}),r.a.createElement("label",{for:"vehicle1"},"Turn edge limiting on/off")))),r.a.createElement("br",null),r.a.createElement("h4",null,"Area Under Curve: ",r.a.createElement("span",{ref:this.areaRef})," | First x-coordinate: ",this.state.col11," | Second x-coordinate: ",this.state.col21," "))}}]),a}(n.Component)),K=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).rectRef=r.a.createRef(),n.svgRef=r.a.createRef(),n.areaRef=r.a.createRef(),n.handleDrop=n.handleDrop.bind(Object(F.a)(n)),n.handleSelectedFile=n.handleSelectedFile.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n.changeJSON=n.changeJSON.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.state={dataReceived:!1,fileNames:[],setFileNames:[],fileChosen:"",key:n.props.key},n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.imported&&(this.handleChange("FileName",this.props.qToDisplay.FileName,this.props.count),this.handleChange("FileContent",this.props.qToDisplay.FileContent,this.props.count));var e=this.props.auth.user.username;this.props.getColData(e,"itemData")}},{key:"saveFile",value:function(e,t,a){this.props.saveFile(e,t,a)}},{key:"handleDrop",value:function(e){var t=this;console.log(e.map((function(a){e.forEach((function(e){if(t.props.dataFlowColData.filter((function(e){return"normal-curve"==e.itemType})).map((function(e){return e.fileName})).includes(e.name))alert("File name already exists. Please upload a file with a unique name."),t.setState({dataReceived:!1});else{t.handleChange("FileName",e.name,t.props.count);var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var n,r=a.result,i=JSON.parse(r);(t.handleChange("FileContent",i,t.props.count),0==t.props.files.length)?t.saveFile("normal-curve",e.name,i):t.props.files.map((function(e){return e.fileName})).includes(e.name)||t.saveFile("normal-curve",e.name,i);var s=i["max-height"],l=i["circle-radius"],o=4*l-1,c=50*(Math.ceil(o*s/50)+1),u=c-50,h=100*Math.ceil((o*i.len1*2+o*i.len2*2)/100);Math.round(h/o);t.setState((n={dataReceived:!0,fileText:r,jsonData:i,svgWidth:h,svgHeight:c,distancing:o},Object(D.a)(n,"dataReceived",!0),Object(D.a)(n,"len1",i.len1),Object(D.a)(n,"colValHeiS",i.colValHeiS),Object(D.a)(n,"len2",i.len2),Object(D.a)(n,"colValHeiS2",i.colValHeiS2),Object(D.a)(n,"distancing1",(i.len2+1)*o),Object(D.a)(n,"distancing2",(i.len1+i.len2+4)*o),Object(D.a)(n,"triCent1",Math.round(.5*i.len1*o)+o),Object(D.a)(n,"triCent2",Math.round(.5*i.len2*o)+o),Object(D.a)(n,"col11",i.len2+1),Object(D.a)(n,"col12",i.len1+i.len2+1),Object(D.a)(n,"col21",i.len1+i.len2+3),Object(D.a)(n,"col22",i.len1+2*i.len2+3),Object(D.a)(n,"colLim1",Math.round((h-i.len1*o)/o)),Object(D.a)(n,"colLim2",Math.round((h-i.len2*o)/o)),Object(D.a)(n,"overlapVals",i.overlapVals),Object(D.a)(n,"circRad",l),Object(D.a)(n,"ceilDist",u),n))},a.readAsText(e)}}))}))),this.setState({fileNames:e.map((function(e){return e.name}))})}},{key:"handleSelectedFile",value:function(){var e,t=this;this.handleChange("FileName",this.state.fileChosen,this.props.count);var a=this.props.dataFlowColData.filter((function(e){return e.fileName==t.state.fileChosen}))[0].fileContent;this.handleChange("FileContent",a,this.props.count);var n=a["max-height"],r=a["circle-radius"],i=4*r-1,s=50*(Math.ceil(i*n/50)+1),l=s-50,o=100*Math.ceil((i*a.len1*2+i*a.len2*2)/100);Math.round(o/i);this.setState((e={dataReceived:!0,jsonData:a,svgWidth:o,svgHeight:s,distancing:i},Object(D.a)(e,"dataReceived",!0),Object(D.a)(e,"len1",a.len1),Object(D.a)(e,"colValHeiS",a.colValHeiS),Object(D.a)(e,"len2",a.len2),Object(D.a)(e,"colValHeiS2",a.colValHeiS2),Object(D.a)(e,"distancing1",(a.len2+1)*i),Object(D.a)(e,"distancing2",(a.len1+a.len2+4)*i),Object(D.a)(e,"triCent1",Math.round(.5*a.len1*i)+i),Object(D.a)(e,"triCent2",Math.round(.5*a.len2*i)+i),Object(D.a)(e,"col11",a.len2+1),Object(D.a)(e,"col12",a.len1+a.len2+1),Object(D.a)(e,"col21",a.len1+a.len2+3),Object(D.a)(e,"col22",a.len1+2*a.len2+3),Object(D.a)(e,"colLim1",Math.round((o-a.len1*i)/i)),Object(D.a)(e,"colLim2",Math.round((o-a.len2*i)/i)),Object(D.a)(e,"overlapVals",a.overlapVals),Object(D.a)(e,"circRad",r),Object(D.a)(e,"ceilDist",l),e))}},{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"getCount",value:function(){this.props.getCount(this.props.count)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"changeJSON",value:function(e,t){var a=this.state.jsonData;a[e]=Number(t),this.handleChange("FileContent",a,this.props.count)}},{key:"render",value:function(){if(this.state.dataReceived)return r.a.createElement("div",null,r.a.createElement(U,{data:this.state.jsonData,count:this.props.count,changeJSON:this.changeJSON,handleChange:this.handleChange}),r.a.createElement("br",null));if(this.props.imported)return r.a.createElement("div",null,r.a.createElement(U,{imported:!0,data:this.props.qToDisplay.FileContent,qToDisplay:this.props.qToDisplay,count:this.props.count,changeJSON:this.changeJSON,handleChange:this.handleChange}));var e=this.props.dataFlowColData.filter((function(e){return"normal-curve"==e.itemType})).map((function(e){return e.fileName}));e.unshift("Select File");var t=e.map((function(e){return r.a.createElement("option",{value:e},e)}));return r.a.createElement("div",{className:"boxed"},"Select previously uploaded files:",r.a.createElement("br",null),r.a.createElement("select",{name:"fileChosen",value:this.state.fileChosen,onChange:this.onChange},t),r.a.createElement("button",{onClick:this.handleSelectedFile},"OK"),r.a.createElement("br",null),r.a.createElement(J.a,{onDrop:this.handleDrop,accept:"application/JSON, .json"},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t({className:"dropzone"}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drag'n'drop files, or click to select files (must be valid JSON file)"))})))}}]),a}(n.Component),H=Object(u.b)((function(e){return{auth:e.auth,dataFlowColData:e.dataFlow.colData}}),{getColData:P})(K),W=a(62),G=(a(108),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).sliderRef=r.a.createRef(),n.graphRef=r.a.createRef(),n.qRef=r.a.createRef(),n.minRef=r.a.createRef(),n.maxRef=r.a.createRef(),n.questionKeyRef=r.a.createRef(),n.state={checked:!1,minVal:Number,maxVal:Number,sliderPos:Number},n.onChange=n.onChange.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.drawChart()}},{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"drawChart",value:function(){var e=this,t=this.props.data,a=W.a(this.graphRef.current).append("svg").attr("width",this.props.width).attr("height",this.props.height);a.selectAll("rect").data(t).enter().append("rect").attr("x",(function(a,n){return n*e.props.width/t.length})).attr("y",(function(t,a){return e.props.height-10*t})).attr("width",this.props.width/t.length-10).attr("height",(function(e,t){return 10*e})).attr("fill","#4CAF50").attr("opacity",.5),a.selectAll("text").data(t).enter().append("text").text((function(e){return e})).attr("x",(function(a,n){return n*e.props.width/t.length})).attr("y",(function(t,a){return e.props.height-10*t-3}))}},{key:"render",value:function(){var e=this,t=this.props.count+1,a=this.props.height/2;return r.a.createElement("div",null,r.a.createElement("div",{ref:this.graphRef,style:{position:"relative",width:this.props.width,margin:"auto"}},r.a.createElement("div",{style:{position:"absolute",top:a}},r.a.createElement("input",{type:"range",min:this.state.minVal,max:this.state.maxVal,className:"hist-slider",onChange:this.onChange,name:"sliderPos",value:this.state.sliderPos,step:this.props.step,ref:this.sliderRef,style:{width:this.props.width}}))),this.state.minVal,r.a.createElement("input",{type:"range",class:"dummy-slider",style:{width:this.props.width},onChange:this.onChange,name:"sliderPos",value:this.state.sliderPos,step:this.props.step,min:this.state.minVal,max:this.state.maxVal}),this.state.maxVal,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"boxed"},"Question #",t," ",r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",rows:"10",ref:this.qRef,onInput:function(){return e.handleChange("Question",e.qRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("p",null,"Minimum:",r.a.createElement("input",{onInput:function(){return e.handleChange("lowRange",e.minRef.current.value,e.props.count)},ref:this.minRef,type:"text",name:"minVal",value:this.state.minVal,onChange:this.onChange})),r.a.createElement("br",null),r.a.createElement("p",null,"Maximum: ",r.a.createElement("input",{onInput:function(){return e.handleChange("highRange",e.maxRef.current.value,e.props.count)},ref:this.maxRef,type:"text",name:"maxVal",value:this.state.maxVal,onChange:this.onChange})),r.a.createElement("br",null),r.a.createElement("br",null),"What csv column name do you want to assign to this question? ",r.a.createElement("br",null),r.a.createElement("b",null,"Please use letters only, and the name must be unique.")," ",r.a.createElement("br",null),"Recommedation: include your experiment name, this question number (",t,"), and the question type (threshold)",r.a.createElement("br",null),r.a.createElement("input",{type:"text",ref:this.questionKeyRef,onInput:function(){return e.handleChange("threshold-key",e.questionKeyRef.current.value,e.props.count)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.delete.bind(this)},"Delete Question")))}}]),a}(n.Component)),z=(a(109),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={dataReceived:!1,fileChosen:""},n.delete=n.delete.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n.handleDrop=n.handleDrop.bind(Object(F.a)(n)),n.handleSelectedFile=n.handleSelectedFile.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.auth.user.username;this.props.getColData(e,"itemData")}},{key:"saveFile",value:function(e,t,a){this.props.saveFile(e,t,a)}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"getCount",value:function(){this.props.getCount(this.props.count)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value)),console.log(e.target.name)}},{key:"handleDrop",value:function(e){var t=this;console.log(e.map((function(n){e.forEach((function(e){if(t.props.dataFlowColData.filter((function(e){return"threshold"==e.itemType})).map((function(e){return e.fileName})).includes(e.name))alert("File name already exists. Please upload a file with a unique name."),t.setState({dataReceived:!1});else{t.handleChange("FileName",e.name,t.props.count);var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var r=n.result,i=JSON.parse(r);(t.handleChange("FileContent",i,t.props.count),0==t.props.files.length)?t.saveFile("threshold",e.name,i):t.props.files.map((function(e){return e.fileName})).includes(e.name)||t.saveFile("threshold",e.name,i);t.setState({data:i.data,width:i.width,height:i.height,id:a,step:i.step,defaultValue:i.defaultValue,dataReceived:!0,fileText:r,jsonData:i.data})},n.readAsText(e)}}))}))),this.setState({fileNames:e.map((function(e){return e.name}))})}},{key:"handleSelectedFile",value:function(){var e=this;this.handleChange("FileName",this.state.fileChosen,this.props.count);var t=this.props.dataFlowColData.filter((function(t){return t.fileName==e.state.fileChosen}))[0].fileContent;this.handleChange("FileContent",t,this.props.count),this.setState({data:t.data,width:t.width,height:t.height,id:a,step:t.step,defaultValue:t.defaultValue,dataReceived:!0,jsonData:t.data})}},{key:"render",value:function(){if(this.state.dataReceived)return r.a.createElement("div",null,r.a.createElement(G,{data:this.state.data,width:this.state.width,height:this.state.height,step:this.state.step,delete:this.delete,handleChange:this.handleChange,count:this.props.count,class:"center"}),r.a.createElement("br",null));var e=this.props.dataFlowColData.filter((function(e){return"threshold"==e.itemType}));console.log(e);var t=e.map((function(e){return e.fileName}));t.unshift("Select File");var a=t.map((function(e){return r.a.createElement("option",{value:e},e)}));return r.a.createElement("div",{className:"boxed"},"Select previously uploaded files:",r.a.createElement("br",null),r.a.createElement("select",{name:"fileChosen",value:this.state.fileChosen,onChange:this.onChange},a),r.a.createElement("button",{onClick:this.handleSelectedFile},"OK"),r.a.createElement("br",null),r.a.createElement(J.a,{onDrop:this.handleDrop,accept:"application/JSON, .json"},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t({className:"dropzone"}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drag'n'drop files, or click to select files (must be valid JSON file)"))})))}}]),a}(n.Component)),Y=Object(u.b)((function(e){return{auth:e.auth,dataFlowColData:e.dataFlow.colData}}),{getColData:P})(z),X=a(11),Z=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).builderFunction=function(e){var t=n.state.children;switch(e){case"slider":t.push({id:n.state.count,tab:r.a.createElement(_,{getCount:n.getCount,delete:n.delete,count:n.state.count,handleChange:n.handleChange,key:n.state.count.toString(),appendToKeysArr:n.appendToKeysArr})});break;case"static-text":t.push({id:n.state.count,tab:r.a.createElement(B,{getCount:n.getCount,delete:n.delete,count:n.state.count,handleChange:n.handleChange,key:n.state.count.toString()})});break;case"normal-curve":t.push({id:n.state.count,tab:r.a.createElement(H,{getCount:n.getCount,delete:n.delete,count:n.state.count,handleChange:n.handleChange,files:n.state.files,saveFile:n.saveFile,key:n.state.count.toString()})});break;case"threshold":t.push({id:n.state.count,tab:r.a.createElement(Y,{getCount:n.getCount,delete:n.delete,count:n.state.count,handleChange:n.handleChange,files:n.state.files,saveFile:n.saveFile,key:n.state.count.toString()})});break;default:t=r.a.createElement("div",null,"Unknown Element")}var a=n.state.output;a[n.state.count.toString()]={Type:e};var i=n.state.count+1;n.setState({children:t,count:i,output:a,complete:!1})},n.state={children:[],count:0,output:{},deleted:[],complete:!1,exptName:"",files:[]},n.myRef=r.a.createRef(),n.submitRef=r.a.createRef(),n.nameRef=r.a.createRef(),n.builderFunction=n.builderFunction.bind(Object(F.a)(n)),n.importQuestion=n.importQuestion.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.delete=n.delete.bind(Object(F.a)(n)),n.getCount=n.getCount.bind(Object(F.a)(n)),n.outputCreate=n.outputCreate.bind(Object(F.a)(n)),n.checkOutput=n.checkOutput.bind(Object(F.a)(n)),n.saveFile=n.saveFile.bind(Object(F.a)(n)),n.onChange=n.onChange.bind(Object(F.a)(n)),n.appendToKeysArr=n.appendToKeysArr.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName;this.props.getStudyInfo(e,t)}},{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"mapQTypetoQKey",value:function(e){switch(e){case"slider":return"slider-question-key";case"static-text":return"static-text-key";case"normal-curve":return"normal-curve-question-key";case"threshold":return"threshold-key";default:return""}}},{key:"importQuestion",value:function(e,t){var a=this,n=this.state.children,i=this.props.experiments.filter((function(t){return t.exptName==e}))[0],s=Object.keys(i).filter((function(e){return"q"==e.charAt(0)})).filter((function(e){var n=a.mapQTypetoQKey(i[e].Type);return i[e][n]==t}))[0],l=i[s];switch(console.log(l),l.Type){case"slider":n.push({id:this.state.count,tab:r.a.createElement(_,{defaultQ:l.Question,defaultMin:l.lowRange,defaultMax:l.highRange,imported:!0,getCount:this.getCount,delete:this.delete,count:this.state.count,handleChange:this.handleChange,key:this.state.count.toString(),appendToKeysArr:this.appendToKeysArr})});break;case"static-text":n.push({id:this.state.count,tab:r.a.createElement(B,{defaultText:l["Static Text"],imported:!0,getCount:this.getCount,delete:this.delete,count:this.state.count,handleChange:this.handleChange,key:this.state.count.toString()})});break;case"normal-curve":n.push({id:this.state.count,tab:r.a.createElement(H,{qToDisplay:l,imported:!0,getCount:this.getCount,delete:this.delete,count:this.state.count,handleChange:this.handleChange,files:this.state.files,saveFile:this.saveFile,key:this.state.count.toString()})});break;case"threshold":n.push({id:this.state.count,tab:r.a.createElement(Y,{getCount:this.getCount,delete:this.delete,count:this.state.count,handleChange:this.handleChange,files:this.state.files,saveFile:this.saveFile,key:this.state.count.toString()})});break;default:n=r.a.createElement("div",null,"Unknown Element")}var o=this.state.output;o[this.state.count.toString()]={Type:l.Type};var c=this.state.count+1;this.setState({children:n,count:c,output:o,complete:!1})}},{key:"handleChange",value:function(e,t,a){var n=this.state.output;n[a.toString()][e]=t,this.setState({output:n})}},{key:"appendToKeysArr",value:function(e,t,a,n){var r=this.state.output;Object.keys(r[n.toString()]).includes(e)||(r[n.toString()][e]={}),r[n.toString()][e][t]=a,console.log(r)}},{key:"delete",value:function(e){var t=this.state.deleted;t.push(e),this.setState({deleted:t})}},{key:"getCount",value:function(e){return e}},{key:"saveFile",value:function(e,t,a){var n={itemType:e,fileName:t,fileContent:a};this.setState({files:this.state.files.concat(n)})}},{key:"checkOutput",value:function(e){for(var t=0,a=!0;t.toString()in e;){var n=e[t.toString()];switch(n.Type){case"slider":if("lowRange"in n&&"highRange"in n&&"Question"in n){var r=!isNaN(n.lowRange),i=!isNaN(n.highRange);a=!!(parseInt(n.highRange)>parseInt(n.lowRange)&&r&&i)&&(a&&!0)}else a=!1;break;default:a=!1;case"normal-curve":a=!0}t++}return a}},{key:"outputCreate",value:function(){var e=this,t={},a={};this.state.children.filter((function(t){return-1===e.state.deleted.indexOf(t.id)})).map((function(n){t[n.id.toString()]=e.state.output[n.id.toString()];var r=e.state.output[n.id.toString()];switch(r.Type){case"normal-curve":a[r["normal-curve-question-key"]]=r.Question,a[r["normal-curve-question-key"]+"."+r["normal-curve-legend-key1"]]=r.graph1key,a[r["normal-curve-question-key"]+"."+r["normal-curve-legend-key2"]]=r.graph2key;case"threshold":a[r["threshold-key"]]=r.Question}}));this.nameRef.current.value.length;var n={};n.exptName=this.nameRef.current.value;for(var r=0;r<this.state.count;)r.toString()in t&&(n["q"+r.toString()]=t[r.toString()]),r++;n.count=r,delete a[void 0],n.index=a,console.log(n);var i=this.props.auth.user.username,s=this.props.match.params.studyName;0==!this.state.files.length&&this.state.files.map((function(t){return e.props.sendFile(i,t)})),X.put("https://test-api-615.herokuapp.com/api/feedback/"+i+"/info/studyName-"+s+"/experiments",n).then((function(e){console.log(e)})).then((function(e){alert("Your experiment has been successfully created"),window.location.reload(!1)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.match.params.username,a=this.props.match.params.studyName,n="/"+t+"/"+a,i={};this.state.children.filter((function(t){return-1===e.state.deleted.indexOf(t.id)})).map((function(t){i[t.id.toString()]=e.state.output[t.id.toString()]}));for(var s={},o=0;o<this.state.count;)o.toString()in i&&(s["q"+o.toString()]=i[o.toString()]),o++;return s.count=o,r.a.createElement("div",{ref:this.myRef},r.a.createElement("h2",null,"Experiment Builder"),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:n},a),r.a.createElement("form",{action:"/submit",method:"POST",className:"unit"},r.a.createElement("p",null,"Enter a name for this experiment "),r.a.createElement("input",{ref:this.nameRef,value:this.state.exptName,onChange:this.onChange,type:"text",id:"userid",name:"exptName"}),r.a.createElement("br",null),r.a.createElement("b",null,"all experiments in a study must have unique names")),this.state.children.filter((function(t){return-1===e.state.deleted.indexOf(t.id)})).map((function(e){return e.tab})),r.a.createElement(Q,{build:this.builderFunction,importQuestion:this.importQuestion,username:this.props.match.params.username,studyName:this.props.match.params.studyName}),r.a.createElement("div",{className:"extraPad"},r.a.createElement("button",{onClick:this.outputCreate,ref:this.submitRef,type:"submit",value:"Submit",className:"btn"},"Submit")),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return console.log(s)}},"Show finalObj"))}}]),a}(n.Component),$=Object(u.b)((function(e){return{auth:e.auth,dataFlowDBInfo:e.dataFlow.dbInfo,dataFlowFileName:e.dataFlow.fileName,experiments:e.dataFlow.studyInfo}}),{sendFile:function(e,t){return function(a){f.a.post("https://test-api-615.herokuapp.com/api/feedback/"+e+"/itemData",t).then((function(e){console.log("Data sent to DB")}))}},getStudyInfo:M})(Z),ee=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper white"},r.a.createElement(l.b,{to:"/"},"Home"),r.a.createElement("br",null),e?"":r.a.createElement(l.b,{to:"/register"},"Register"),r.a.createElement("br",null),e?r.a.createElement(l.b,{to:"/dashboard"}," Dashboard "):r.a.createElement(l.b,{to:"/login"},"Login"))))}}]),a}(n.Component),te=Object(u.b)((function(e){return{auth:e.auth}}))(ee),ae=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return this.props.auth.isAuthenticated?r.a.createElement("div",{className:"container"},"Scientist: ",r.a.createElement("b",null,this.props.auth.user.username)):r.a.createElement("div",{className:"container"})}}]),a}(n.Component),ne=Object(u.b)((function(e){return{auth:e.auth}}),{})(ae),re=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Welcome to Psych Researcher App!"),"Please click on this ",r.a.createElement("p",null),r.a.createElement("a",{target:"_blank",href:"https://github.com/statistical-perceptions/statistical-perceptions.github.io"},"link")," ",r.a.createElement("p",null),"to view researcher user guide.")}}]),a}(n.Component),ie=Object(u.b)((function(e){return{auth:e.auth}}),{})(re),se=a(22),le=a.n(se),oe=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){var e;return Object(I.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(D.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={username:"",password:"",password2:"",errors:{}},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Register below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account?",r.a.createElement(l.b,{to:"/login"},"Log in")),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},"Username:",r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:le()("",{invalid:e.userExists})}),r.a.createElement("span",{className:"red-text"},e.userExists),r.a.createElement("br",null),r.a.createElement("br",null),"Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:le()("",{invalid:e.password})}),r.a.createElement("span",{className:"red-text"},e.password),r.a.createElement("br",null),r.a.createElement("br",null),"Confirm Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:le()("",{invalid:e.password2})}),r.a.createElement("span",{className:"red-text"},e.password2),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn"},"Register")))}}]),a}(n.Component),ce=Object(u.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){f.a.post("https://test-api-615.herokuapp.com/api/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(o.g)(oe)),ue=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){var e;return Object(I.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(D.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};e.props.loginUser(a)},e.state={username:"",password:"",errors:{}},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Log in"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},"Username:",r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:le()("",{invalid:e.userNotFound})}),r.a.createElement("span",{className:"red-text"},e.userNotFound),r.a.createElement("br",null),r.a.createElement("br",null),"Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:le()("",{invalid:e.pwdIncorrect})}),r.a.createElement("span",{className:"red-text"},e.pwdIncorrect),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Log in",className:"btn"})))}}]),a}(n.Component),he=Object(u.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){f.a.post("https://test-api-615.herokuapp.com/api/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=m()(a);t(g(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}}})(ue),pe=(a(110),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).onLogoutClick=function(e){e.preventDefault(),n.props.logoutUser()},n.state={studyName:""},n.onChange=n.onChange.bind(Object(F.a)(n)),n.onAddStudy=n.onAddStudy.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"componentWillMount",value:function(){var e=this.props.auth.user.username;this.props.getDBInfo(e)}},{key:"getStudyNames",value:function(){var e=this;return this.props.dataFlowDBInfo.map((function(t){if(Object.keys(t).includes("studyName")){var a="/"+e.props.auth.user.username+"/"+t.studyName;return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,t.studyName," ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:a},"View")))}}))}},{key:"onAddStudy",value:function(){var e=this.props.auth.user.username;this.props.addStudyName(e,this.state.studyName)}},{key:"render",value:function(){this.props.auth.user.username;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Dashboard"),r.a.createElement("form",null,r.a.createElement("br",null),r.a.createElement("b",null,"Configure Experiment Types:")," ",r.a.createElement("br",null),r.a.createElement("a",{href:"https://colab.research.google.com/drive/1yleVQB_CrNJ5Z3v-YPatW2XqAD7yS8yp?usp=sharing",target:"_blank"},"Normal Curves"),r.a.createElement("div",null,r.a.createElement("br",null))),r.a.createElement("h3",null,"Add a Study"),"Enter a name for your study: ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"studyName",value:this.state.studyName,onChange:this.onChange}),r.a.createElement("button",{onClick:this.onAddStudy},"Add Study"),r.a.createElement("br",null),"Please do ",r.a.createElement("b",null,"not"),' use "-" in the name',r.a.createElement("form",null,r.a.createElement("br",null),this.getStudyNames(),r.a.createElement("br",null)),r.a.createElement("button",{onClick:this.onLogoutClick,className:"btn"},"Logout"),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null)))}}]),a}(n.Component)),me=Object(u.b)((function(e){return{auth:e.auth,dataFlowDBInfo:e.dataFlow.dbInfo}}),{logoutUser:v,addStudyName:function(e,t){return function(a){var n={studyName:t,experiments:[]};f.a.post("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info",n).then((function(e){a({type:"ADD_STUDY_NAME",payload:e.data.studyName}),alert("Study ["+t+"] is created."),window.location.reload(!0)}))}},getDBInfo:function(e){return function(t){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info").then((function(e){t({type:"GET_DB_INFO",payload:e.data})}))}}})(pe),de=a(23),fe=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={checked:!0,deployed:Boolean},n.deployExpts=n.deployExpts.bind(Object(F.a)(n)),n.changeState=n.changeState.bind(Object(F.a)(n)),n.onDeploy=n.onDeploy.bind(Object(F.a)(n)),n.onChecked=n.onChecked.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.user.username,a=this.props.match.params.studyName;f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+t+"/info/studyName-"+a).then((function(n){Object.keys(n.data).includes("randomize")?e.setState({checked:n.data.randomize}):e.putRandomize(t,a,{randomize:!0})})),this.props.getStudyInfo(t,a),this.props.getColNames(t),f.a.get("https://test-api-615.herokuapp.com/api/"+t+"/collections").then((function(t){var n=t.data.filter((function(e){return e.includes(a)}));console.log(n),e.setState({deployed:n.length>=1})}))}},{key:"processColNames",value:function(){var e=this.props.match.params.studyName;return this.props.colNames.filter((function(e){return"info"!==e})).filter((function(t){return t.split("-")[0]==e})).map((function(e){return e.split("-")[1]}))}},{key:"putRandomize",value:function(e,t,a){f.a.put("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info/studyName-"+t,a)}},{key:"onChecked",value:function(){var e=!this.state.checked;this.setState({checked:!this.state.checked});var t=this.props.auth.user.username,a=this.props.match.params.studyName,n={randomize:e};this.putRandomize(t,a,n)}},{key:"getExptNames",value:function(){var e=this,t=this.props.match.params.username,a=this.props.match.params.studyName,n=this.processColNames();return this.props.experiments.map((function(i){var s,o=i.exptName,c=i.link;s=null==i.condition?"N/A":i.condition;var u="/"+t+"/"+a+"/"+o+"/configs",h="/"+t+"/"+a+"/"+o+"/participantsExptData",p="https://statistical-perceptions.github.io/participant-app/#/participant-app/expt/"+t+"/"+a+"-"+o,m="https://statistical-perceptions.github.io/participant-app/#/participant-app/preview/"+t+"/"+a+"-"+o,d="https://test-api-615.herokuapp.com/api/feedback/"+t+"/"+a+"-"+o;return n.includes(o)?r.a.createElement("div",{className:"container"},e.state.checked?r.a.createElement("div",null,"You have chosen to randomize experiments in this study."):r.a.createElement("div",null,"You have chosen not to randomize experiments in this study."),r.a.createElement("br",null),r.a.createElement("div",{className:"boxed"},r.a.createElement("b",null,i.exptName)," ",r.a.createElement("br",null),r.a.createElement("a",{target:"_blank",href:m},"Preview Experiment")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(l.b,{to:u},r.a.createElement("button",{type:"button"},"Experiment Configs"))," ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:h},r.a.createElement("button",{type:"button"},"View Participants Data"))," ",r.a.createElement("p",null," "),r.a.createElement("br",null),r.a.createElement("br",null),"Condition: ",r.a.createElement("b",null,s),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Database Link:"),r.a.createElement("br",null),d," ",r.a.createElement("br",null),r.a.createElement(de.CopyToClipboard,{text:d},r.a.createElement("button",{onClick:function(){return alert("Database link has been copied to clipboard. Paste it into your Qualtrics survey :)")}},"Copy experiment link to clipboard")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Experiment Link:")," ",r.a.createElement("br",null),p," ",r.a.createElement("br",null),r.a.createElement(de.CopyToClipboard,{text:p},r.a.createElement("button",{onClick:function(){return alert("Experiment link has been copied to clipboard. Paste it into your Qualtrics survey :)")}},"Copy experiment link to clipboard")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Qualtrics Demographics Survey Link:")," ",r.a.createElement("br",null),c," ",r.a.createElement("br",null),r.a.createElement(de.CopyToClipboard,{text:c},r.a.createElement("button",{onClick:function(){return alert("Qualtrics Survey link has been copied to clipboard. Paste it into your Qualtrics survey :)")}},"Copy experiment link to clipboard")))):r.a.createElement("div",null,r.a.createElement("div",{className:"boxed"},"Experiment: ",r.a.createElement("b",null,i.exptName),r.a.createElement("br",null),r.a.createElement(l.b,{to:u},r.a.createElement("button",{type:"button"},"Configurations")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Experiment Link:"),r.a.createElement("br",null),p," ",r.a.createElement("br",null),r.a.createElement(de.CopyToClipboard,{text:p},r.a.createElement("button",{onClick:function(){return alert("Experiment link has been copied to clipboard. Paste it into your Qualtrics survey :)")}},"Copy experiment link to clipboard")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Database Link:"),r.a.createElement("br",null),d," ",r.a.createElement("br",null),r.a.createElement(de.CopyToClipboard,{text:d},r.a.createElement("button",{onClick:function(){return alert("Database link has been copied to clipboard. Paste it into your Qualtrics survey :)")}},"Copy experiment link to clipboard")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"TODO")," ",r.a.createElement("br",null),"Paste the link to demographics qualtrics survey below: ",r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",rows:"1",id:o+"link",onInput:e.changeState,value:e.state.exptName}),r.a.createElement("br",null),r.a.createElement("br",null),e.state.checked?r.a.createElement("div",null,r.a.createElement("b",null,"TODO")," ",r.a.createElement("br",null),"Name the condition of this experiment: ",r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",rows:"1",id:o+"condition",onInput:e.changeState,value:e.state.condition}),r.a.createElement("br",null)):r.a.createElement("div",null),r.a.createElement("br",null),r.a.createElement("button",{id:o,onClick:e.onDeploy},r.a.createElement("b",null,"DEPLOY")),r.a.createElement("br",null)))}))}},{key:"changeState",value:function(e){this.setState(Object(D.a)({},e.target.id,e.target.value))}},{key:"onDeploy",value:function(e){var t=this,a=this.props.match.params.username,n=this.props.match.params.studyName,r=e.currentTarget.id,i=this.state[r+"link"],s=this.state[r+"condition"],l={condition:s};f.a.put("https://test-api-615.herokuapp.com/api/feedback/"+a+"/info/studyName-"+n+"/experiments/exptName-"+r+"/condition",l).then((function(e){console.log(e.data);var l={link:t.state.checked?i+"?condition="+s:i};f.a.put("https://test-api-615.herokuapp.com/api/feedback/"+a+"/info/studyName-"+n+"/experiments/exptName-"+r+"/link",l).then((function(e){console.log(e.data),t.props.createExptCol(a,n+"-"+r,r)}))}))}},{key:"deployExpts",value:function(){var e=this,t=this.props.auth.user.username,a=this.props.match.params.studyName,n=this.processColNames();this.props.experiments.map((function(e){return e.exptName})).filter((function(e){return!n.includes(e)})).forEach((function(n){e.props.createExptCol(t,a+"-"+n,n)}))}},{key:"deploy",value:function(){var e=this.processColNames(),t=this.props.experiments.map((function(e){return e.exptName})),a=t.filter((function(t){return!e.includes(t)}));return 0==t.length?r.a.createElement("div",{className:"container"},r.a.createElement("p",{style:{color:"grey"}},"No experiments.")):0==a.length?r.a.createElement("div",{className:"container"},r.a.createElement("p",{style:{color:"grey"}},"All experiments are deployed.")):void 0}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t+"/exptBuilder",n=(this.processColNames(),this.props.experiments.map((function(e){return e.exptName})),"/"+e+"/"+t+"/participantsStudyData");return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Study: ",this.props.match.params.studyName),r.a.createElement(l.b,{to:a},r.a.createElement("button",null,"Build an Experiment")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(l.b,{to:n},r.a.createElement("button",null,"View All Participant Data")),r.a.createElement("h3",null,"Your Experiments"),this.state.deployed?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",onChange:this.onChecked,checked:this.state.checked}),"I want to randomize experiments in this study",r.a.createElement("br",null),r.a.createElement("br",null)),this.getExptNames(),r.a.createElement("br",null),r.a.createElement("br",null),this.deploy(),r.a.createElement("br",null))}}]),a}(n.Component),be=Object(u.b)((function(e){return{auth:e.auth,experiments:e.dataFlow.studyInfo,colNames:e.dataFlow.colNames}}),{getStudyInfo:M,createExptCol:function(e,t,a){return function(n){f.a.post("https://test-api-615.herokuapp.com/api/"+e+"/createCol/"+t).then((function(e){alert("Experiment ["+a+"] is deployed."),window.location.reload(!0)}))}},getColNames:q,saveAddInfo:function(e,t,a,n,r){return function(i){f.a.put("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info/studyName-"+t+"/experiments/exptName-"+a+"/"+n,r).then((function(e){console.log(e.data)}))}}})(fe),ge=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName;this.props.getStudyInfo(e,t)}},{key:"showExptData",value:function(){var e=this.props.match.params.exptName;if(0==!this.props.experiments.length){var t=this.props.experiments.find((function(t){return t.exptName==e})),a=JSON.stringify(t);return r.a.createElement("div",null,a)}}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Experiment: ",this.props.match.params.exptName),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:a},t),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Configuration data: "),r.a.createElement("br",null),r.a.createElement("br",null),this.showExptData())}}]),a}(n.Component),ve=Object(u.b)((function(e){return{auth:e.auth,experiments:e.dataFlow.studyInfo}}),{getStudyInfo:M})(ge),Ee=a(32),ye=(a(58),function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={},n.makeArr=n.makeArr.bind(Object(F.a)(n)),n.showJSONData=n.showJSONData.bind(Object(F.a)(n)),n.getIndex=n.getIndex.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.username,a=this.props.match.params.studyName;f.a.get("https://test-api-615.herokuapp.com/api/"+t+"/collections").then((function(n){var r=n.data.filter((function(e){return"info"!=e&&"itemData"!=e&&e.includes(a)}));console.log(r),r.map((function(a){return e.props.getColsData(t,a)})),e.props.getStudyInfo(t,a)}))}},{key:"flattenObj",value:function(e){var t={};return function e(a,n){Object.keys(a).forEach((function(r){var i="".concat(n,".").concat(r);"object"===typeof a[r]?e(a[r],i):t[i]=a[r]}))}(e,""),Object.keys(t).map((function(e){var a=e,n=a.substr(1,a.length);!function(e,t,a){e[a]=e[t],delete e[t]}(t,a,n)})),t}},{key:"makeArr",value:function(){var e=this;if(0==!Object.keys(this.props.colsData).length){var t=[],a=[];return this.props.colsData.forEach((function(e){var n=e.participantID,r=Object.keys(e).filter((function(e){return"participantID"!=e&&"_id"!=e}));if(a.includes(n))t.forEach((function(t){if(t.participantID==n){var a=t;r.forEach((function(t){return a[t]=e[t]})),t=a}}));else{var i={};i.participantID=n,r.forEach((function(t){return i[t]=e[t]})),t.push(i),a.push(n)}})),t.map((function(a){var n=e.flattenObj(a),r=t.indexOf(a);t[r]=n})),t}}},{key:"showJSONData",value:function(){var e=this.makeArr();if(null!=e)return e.map((function(e){var t=JSON.stringify(e);return r.a.createElement("div",null,r.a.createElement("br",null),t)}))}},{key:"getIndex",value:function(){var e=this.props.match.params.studyName;if(0==!this.props.experiments.length){var t=[];this.props.experiments.map((function(e){t.push(e.index)}));var a="";t.map((function(e){Object.keys(e).map((function(t){var n=t.toString()+": "+e[t].toString()+"\n";a+=n}))}));var n=document.createElement("a"),r=new Blob([a],{type:"text/plain"});n.href=URL.createObjectURL(r),n.download=e+"Legend.txt",document.body.appendChild(n),n.click(),console.log(r)}}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t,n=e+"_"+t+"_data.csv",i=this.makeArr();return null!=i?r.a.createElement("div",null,r.a.createElement("h2",null,"All Participant Data from Study: ",t),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:a},t),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",null,r.a.createElement(Ee.CSVLink,{data:i,filename:n},"Download Data as CSV")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.getIndex},"Download Legend"),this.showJSONData()):r.a.createElement("div",null,r.a.createElement("h2",null,"All Participant Data from Study: ",t),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:a},t),r.a.createElement("br",null),r.a.createElement("br",null),"It seems like there's no participant data yet...")}}]),a}(n.Component)),Ce=Object(u.b)((function(e){return{auth:e.auth,colsData:e.dataFlow.colsData,colNames:e.dataFlow.colNames,experiments:e.dataFlow.studyInfo}}),{getColNames:q,getColsData:function(e,t){return function(a){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/"+t).then((function(e){e.data.forEach((function(e){a({type:"GET_COLS_DATA",payload:e})}))}))}},getStudyInfo:M})(ye),ke=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={},n.makeArr=n.makeArr.bind(Object(F.a)(n)),n.showJSONData=n.showJSONData.bind(Object(F.a)(n)),n.getIndex=n.getIndex.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a=t+"-"+this.props.match.params.exptName;this.props.getColData(e,a),this.props.getStudyInfo(e,t)}},{key:"flattenObj",value:function(e){var t={};return function e(a,n){Object.keys(a).forEach((function(r){var i="".concat(n,".").concat(r);"object"===typeof a[r]?e(a[r],i):t[i]=a[r]}))}(e,""),Object.keys(t).map((function(e){var a=e,n=a.substr(1,a.length);!function(e,t,a){e[a]=e[t],delete e[t]}(t,a,n)})),t}},{key:"makeArr",value:function(){var e=this;if(0==!Object.keys(this.props.colData).length){var t=[],a=[],n=this.props.colData;return console.log(n),n.forEach((function(e){var n=e.participantID,r=Object.keys(e).filter((function(e){return"participantID"!=e&&"_id"!=e}));if(a.includes(n))t.forEach((function(t){if(t.participantID==n){var a=t;r.forEach((function(t){return a[t]=e[t]})),t=a}}));else{var i={};i.participantID=n,r.forEach((function(t){return i[t]=e[t]})),t.push(i),a.push(n)}})),t.map((function(a){var n=e.flattenObj(a),r=t.indexOf(a);t[r]=n})),t}}},{key:"showJSONData",value:function(){var e=this.makeArr();if(null!=e)return e.map((function(e){var t=JSON.stringify(e);return r.a.createElement("div",null,r.a.createElement("br",null),t)}))}},{key:"getIndex",value:function(){var e=this,t=this.props.match.params.exptName;if(0==!this.props.experiments.length){var a=this.props.experiments.filter((function(t){return t.exptName==e.props.match.params.exptName}))[0].index,n="";Object.keys(a).map((function(e){var t=e.toString()+": "+a[e].toString()+"\n";n+=t}));var r=document.createElement("a"),i=new Blob([n],{type:"text/plain"});r.href=URL.createObjectURL(i),r.download=t+"Legend.txt",document.body.appendChild(r),r.click(),console.log(i)}}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a=this.props.match.params.exptName,n="/"+e+"/"+t,i=e+"_"+t+"_"+a+"_data.csv",s=this.makeArr();return null!=s?(console.log(s),r.a.createElement("div",null,r.a.createElement("h2",null,"Experiment: ",a),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:n},t),r.a.createElement("br",null),r.a.createElement("h4",null,"Participants data: "),r.a.createElement("button",null,r.a.createElement(Ee.CSVLink,{data:s,filename:i},"Download Data as CSV")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.getIndex},"Download Legend"),r.a.createElement("br",null),r.a.createElement("div",null,this.showJSONData()))):r.a.createElement("div",null,r.a.createElement("h2",null,"Experiment: ",this.props.match.params.exptName),"Back to ",r.a.createElement("p",null," "),r.a.createElement(l.b,{to:n},t),r.a.createElement("br",null),r.a.createElement("br",null),"It seems like there's no participant data yet...")}}]),a}(n.Component),xe=Object(u.b)((function(e){return{auth:e.auth,colData:e.dataFlow.colData,experiments:e.dataFlow.studyInfo}}),{getColData:P,getStudyInfo:M})(ke),Oe=function(e){Object(A.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={exptName:"",numOfItems:Number,showItems:!1,itemToSelect:["slider","normal curve"]},n.onChange=n.onChange.bind(Object(F.a)(n)),n.preBuild=n.preBuild.bind(Object(F.a)(n)),n.showItem=n.showItem.bind(Object(F.a)(n)),n.toggleShowItems=n.toggleShowItems.bind(Object(F.a)(n)),n.inputNumItems=n.inputNumItems.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"onChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"showItem",value:function(){console.log(this.state.numOfItems);for(var e=[],t=1;t<=this.state.numOfItems;t++)e.push(r.a.createElement("div",null,"Hello"));return e}},{key:"toggleShowItems",value:function(){this.setState({showItems:!0})}},{key:"inputNumItems",value:function(){return r.a.createElement("div",null,"How many items do you want to build? ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"numOfItems",value:this.state.numOfItems,onChange:this.onChange})," ",r.a.createElement("p",null),r.a.createElement("button",{class:"btn",onClick:this.toggleShowItems},"Ok"))}},{key:"preBuild",value:function(){return r.a.createElement("div",{className:"container"},"Enter experiment name: ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"exptName",value:this.state.exptName,onChange:this.onChange})," ",r.a.createElement("br",null),r.a.createElement("br",null),!this.state.showItems&&r.a.createElement(this.inputNumItems,null))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Experiment Builder")," ",r.a.createElement("br",null),this.preBuild()," ",r.a.createElement("br",null),this.state.showItems&&r.a.createElement(this.showItem,null))}}]),a}(n.Component);if(localStorage.jwtToken){var Se=localStorage.jwtToken;b(Se);var je=m()(Se);w.dispatch(g(je));var Ne=Date.now()/1e3;je.exp<Ne&&(w.dispatch(v()),window.location.href="./login")}var Re=function(){return r.a.createElement(u.a,{store:w},r.a.createElement(l.a,{basename:"/survey-builder/"},r.a.createElement("div",{className:"App"},r.a.createElement(te,null),r.a.createElement("br",null),r.a.createElement(ne,null),r.a.createElement(o.b,{exact:!0,path:"/",component:ie}),r.a.createElement(o.b,{exact:!0,path:"/register",component:ce}),r.a.createElement(o.b,{exact:!0,path:"/login",component:he}),r.a.createElement(o.d,null,r.a.createElement(h,{exact:!0,path:"/dashboard",component:me}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName",component:be}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName/exptBuilder",component:$}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName/newExpt",component:Oe}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName/:exptName/configs",component:ve}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName/participantsStudyData",component:Ce}),r.a.createElement(h,{exact:!0,path:"/:username/:studyName/:exptName/participantsExptData",component:xe})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,a){},55:function(e,t,a){},58:function(e,t,a){},75:function(e,t,a){e.exports=a(117)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.45241193.chunk.js.map