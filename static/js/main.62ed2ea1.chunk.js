(this["webpackJsonpsurvey-builder"]=this["webpackJsonpsurvey-builder"]||[]).push([[0],{45:function(e,t,a){e.exports=a(81)},50:function(e,t,a){},51:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),o=a.n(s),i=(a(50),a(51),a(3)),c=a(10),l=a(44),u=a(9),p=Object(u.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(l.a)(e,["component","auth"]);return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/login"})}}))})),m=a(25),h=a.n(m),d=a(13),f=a.n(d),b=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},v=function(e){return{type:"SET_CURRENT_USER",payload:e}},E=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(v({}))}},y=a(19),g=a(41),O=a(11),N=a(76),j={isAuthenticated:!1,user:{},loading:!1},k={},x={studyName:"",dbInfo:[],studyInfo:[],partData:[],colNames:[]},w=Object(y.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!N(t.payload),user:t.payload});case"USER_LOADING":return Object(O.a)(Object(O.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},dataFlow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STUDY_NAME":return Object(O.a)(Object(O.a)({},e),{},{studyName:t.payload});case"GET_DB_INFO":return Object(O.a)(Object(O.a)({},e),{},{dbInfo:t.payload});case"GET_STUDY_INFO":return Object(O.a)(Object(O.a)({},e),{},{studyInfo:t.payload});case"GET_PART_DATA":return Object(O.a)(Object(O.a)({},e),{},{partData:t.payload});case"GET_COL_NAMES":return Object(O.a)(Object(O.a)({},e),{},{colNames:t.payload});default:return e}}}),C=[g.a],R=Object(y.e)(w,{},Object(y.d)(y.a.apply(void 0,C))),S=a(18),D=a(4),A=a(5),T=a(8),I=a(7),M=a(6),_=(a(77),function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).selectRef=r.a.createRef(),n}return Object(A.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"unit"},r.a.createElement("span",null,"Choose what element to add next"),r.a.createElement("br",null),r.a.createElement("select",{name:"tabType",id:"tabType",ref:this.selectRef},r.a.createElement("option",{value:"slider"},"Slider")),r.a.createElement("button",{onClick:function(){return e.props.build(e.selectRef.current.value)}},"+"))}}]),a}(n.Component)),P=(a(78),function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).sliderRef=r.a.createRef(),n.outputRef=r.a.createRef(),n.qRef=r.a.createRef(),n.minRef=r.a.createRef(),n.maxRef=r.a.createRef(),n.state={min:1,max:100},n.state={checked:!1},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n}return Object(A.a)(a,[{key:"delete",value:function(){this.props.delete(this.props.count)}},{key:"getCount",value:function(){this.props.getCount(this.props.count)}},{key:"handleChange",value:function(e,t,a){this.props.handleChange(e,t,a)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"unit"},r.a.createElement("p",null,"Drag the slider and click confirm"),r.a.createElement("p",null,"Question: ",r.a.createElement("input",{onInput:function(){return e.handleChange("Question",e.qRef.current.value,e.props.count)},ref:this.qRef,type:"text"})),r.a.createElement("input",{type:"range",min:"1",max:"100",defaultValue:"50",className:"slider",name:"myRange",id:"myRange",ref:this.sliderRef}),r.a.createElement("p",null,"Minimum: ",r.a.createElement("input",{onInput:function(){return e.handleChange("lowRange",e.minRef.current.value,e.props.count)},ref:this.minRef,type:"text"})),r.a.createElement("p",null,"Maximum: ",r.a.createElement("input",{onInput:function(){return e.handleChange("highRange",e.maxRef.current.value,e.props.count)},ref:this.maxRef,type:"text"})),r.a.createElement("p",{onClick:this.delete.bind(this)},"Delete"))}}]),a}(n.Component)),U=a(13),F=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).builderFunction=function(e){var t=n.state.children;switch(e){case"slider":t.push({id:n.state.count,tab:r.a.createElement(P,{getCount:n.getCount,delete:n.delete,count:n.state.count,handleChange:n.handleChange,key:n.state.count.toString()})});break;default:t=r.a.createElement("div",null,"Unknown Element")}var a=n.state.output;a[n.state.count.toString()]={Type:e};var s=n.state.count+1;n.setState({children:t,count:s,output:a,complete:!1})},n.state={children:[],count:0,output:{},deleted:[],complete:!1,exptName:""},n.myRef=r.a.createRef(),n.submitRef=r.a.createRef(),n.nameRef=r.a.createRef(),n.builderFunction=n.builderFunction.bind(Object(T.a)(n)),n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.delete=n.delete.bind(Object(T.a)(n)),n.getCount=n.getCount.bind(Object(T.a)(n)),n.outputCreate=n.outputCreate.bind(Object(T.a)(n)),n.checkOutput=n.checkOutput.bind(Object(T.a)(n)),n.onChange=n.onChange.bind(Object(T.a)(n)),n}return Object(A.a)(a,[{key:"onChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleChange",value:function(e,t,a){var n=this.state.output;n[a.toString()][e]=t,this.setState({output:n})}},{key:"delete",value:function(e){var t=this.state.deleted;t.push(e),this.setState({deleted:t})}},{key:"getCount",value:function(e){return e}},{key:"checkOutput",value:function(e){for(var t=0,a=!0;t.toString()in e;){var n=e[t.toString()];switch(n.Type){case"slider":if("lowRange"in n&&"highRange"in n&&"Question"in n){var r=!isNaN(n.lowRange),s=!isNaN(n.highRange);a=!!(parseInt(n.highRange)>parseInt(n.lowRange)&&r&&s)&&(a&&!0)}else a=!1;break;default:a=!1}t++}return a}},{key:"outputCreate",value:function(){var e=this,t={};this.state.children.filter((function(t){return-1===e.state.deleted.indexOf(t.id)})).map((function(a){t[a.id.toString()]=e.state.output[a.id.toString()]}));var a=this.nameRef.current.value.length>0;if(0 in t&&this.checkOutput(t)&&a){var n={userID:(new Date).toString()};n.exptName=this.nameRef.current.value;for(var r=0;r<this.state.count;)r.toString()in t&&(n["q"+r.toString()]=t[r.toString()]),r++;n.count=r,n.type="experiment";var s=this.props.auth.user.username,o=(this.state.exptName,this.props.match.params.studyName);U.put("https://test-api-615.herokuapp.com/api/feedback/"+s+"/info/studyName-"+o+"/experiments",n).then((function(e){console.log(e)})).then((function(e){alert("Your survey has been successfully created"),window.location.reload(!1)})).catch((function(e){console.log(e)}))}else alert("You have not filled out all fields, or have entered an invalid value!")}},{key:"render",value:function(){var e=this,t=this.props.match.params.username,a=this.props.match.params.studyName,n="/"+t+"/"+a;return r.a.createElement("div",{className:"list",ref:this.myRef},"Back to ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:n},a),r.a.createElement("form",{action:"/submit",method:"POST",className:"unit"},r.a.createElement("p",null,"Enter a name for this experiment"),r.a.createElement("input",{ref:this.nameRef,value:this.state.exptName,onChange:this.onChange,type:"text",id:"userid",name:"exptName"}),r.a.createElement("br",null),r.a.createElement("br",null)),this.state.children.filter((function(t){return-1===e.state.deleted.indexOf(t.id)})).map((function(e){return e.tab})),r.a.createElement(_,{build:this.builderFunction}),r.a.createElement("div",{className:"extraPad"},r.a.createElement("button",{onClick:this.outputCreate,ref:this.submitRef,type:"submit",value:"Submit",className:"btn"},"Submit")))}}]),a}(n.Component),B=Object(u.b)((function(e){return{auth:e.auth,dataFlowDBInfo:e.dataFlow.dbInfo}}))(F),V=a(22),G=a(43),L=(a(79),function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).sliderRef=r.a.createRef(),n.rectRef=r.a.createRef(),n.svgRef=r.a.createRef(),n.areaRef=r.a.createRef(),n.dotReturn=n.dotReturn.bind(Object(T.a)(n)),n.curveArea=n.curveArea.bind(Object(T.a)(n)),n.triMouseDown=n.triMouseDown.bind(Object(T.a)(n)),n.triDrag=n.triDrag.bind(Object(T.a)(n)),n.triUp=n.triUp.bind(Object(T.a)(n)),n.curveArea=n.curveArea.bind(Object(T.a)(n)),n.handleDrop=n.handleDrop.bind(Object(T.a)(n)),n.state={x:0,y:0,isDown:!1,rectX:12.5,down:!1,svgWidth:500,svgX:6,distancing:7,mousePointerRange:0,triDown:!1,dataReceived:!1,fileNames:[],setFileNames:[]},n}return Object(A.a)(a,[{key:"dotReturn",value:function(e,t){var a=e;e>7&&(e=15-e);var n=this.state.distancing1+this.state.distancing*a+10,s=140-this.state.distancing*t+10;return n<this.state.rectX?r.a.createElement("circle",{className:"icon",stroke:"#039",fill:"#039",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:s,r:"2"}):r.a.createElement("circle",{className:"icon",stroke:"#555",fill:"#555",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:s,r:"2"})}},{key:"dotReturn2",value:function(e,t){var a=e;e>7&&(e=15-e);var n=this.state.distancing2+this.state.distancing*a+10,s=140-this.state.distancing*t+10;return n<this.state.rectX?r.a.createElement("circle",{className:"icon",stroke:"#039",fill:"#039",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:s,r:"2"}):r.a.createElement("circle",{className:"icon",stroke:"#555",fill:"#555",fillOpacity:"0.3",strokeOpacity:"0.3",cx:n,cy:s,r:"2"})}},{key:"triMouseDown",value:function(e){var t=this;if("mousedown"===e.type){e.preventDefault();var a=this.svgRef.current,n=a.createSVGPoint();n.x=e.clientX;var r=n.matrixTransform(a.getScreenCTM().inverse());this.setState((function(e){return{triDown:!0,mousePointerRange:e.triCent+t.state.distancing2-r.x}}))}}},{key:"triDrag",value:function(e){var t=this.svgRef.current,a=t.createSVGPoint();a.x=e.clientX;var n=a.matrixTransform(t.getScreenCTM().inverse());if(this.setState({x:e.screenX,y:e.screenY,svgX:n.x}),this.state.triDown){var r=this.svgRef.current,s=r.createSVGPoint();s.x=e.clientX;var o=s.matrixTransform(r.getScreenCTM().inverse());e.preventDefault();var i=o.x-this.state.triCent+this.state.mousePointerRange,c=Math.round((i-6)/7);c<0?this.setState({distancing2:0,col21:0,col22:this.state.len2-1}):c>55?this.setState({distancing2:55*this.state.distancing,col21:58,col22:69}):this.setState({distancing2:this.state.distancing*c,col21:c,col22:c+this.state.len2-1}),this.curveArea(c)}}},{key:"triUp",value:function(e){this.state.triDown&&this.setState({triDown:!1})}},{key:"curveArea",value:function(e){this.state.col11>this.state.col22||this.state.col12<this.state.col21?this.areaRef.current.innerHTML=0:this.areaRef.current.innerHTML=this.state.overlapVals[Math.abs(this.state.col22-this.state.col11)]}},{key:"handleDrop",value:function(e){var t=this;console.log(e.map((function(a){e.forEach((function(e){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var e=a.result;console.log(e);var n=JSON.parse(e);t.setState({dataReceived:!0,len1:n.len1,colValHeiS:n.colValHeiS,len2:n.len2,colValHeiS2:n.colValHeiS2,distancing1:7*(n.len2+1),distancing2:7*(n.len1+n.len2+4),triCent:Math.round(.5*n.len2*7)+7,col11:n.len2+1,col12:n.len1+n.len2,col21:17,col22:28,overlapVals:n.overlapVals})},a.readAsText(e)}))}))),this.setState({fileNames:e.map((function(e){return e.name}))})}},{key:"render",value:function(){var e=this,t=this.props.match.params.username,a=this.props.match.params.studyName,n="/"+t+"/"+a;return this.state.dataReceived?r.a.createElement("div",{onMouseMove:function(t){return e.triDrag(t)},onMouseUp:function(t){return e.triUp(t)}},r.a.createElement("svg",{width:this.state.svgWidth,height:"500",ref:this.svgRef},Object(V.a)(Array(this.state.len1).keys()).map((function(t){return Object(V.a)(Array(e.state.colValHeiS[t]).keys()).map((function(a){return e.dotReturn(t,a)}))})),Object(V.a)(Array(this.state.len2).keys()).map((function(t){return Object(V.a)(Array(e.state.colValHeiS2[t]).keys()).map((function(a){return e.dotReturn2(t,a)}))})),r.a.createElement("polygon",{points:[[this.state.triCent+this.state.distancing2-15,175],[this.state.triCent+this.state.distancing2+15,175],[this.state.triCent+this.state.distancing2,160]],onMouseDown:function(t){return e.triMouseDown(t)}}),"Sorry, please use a different browser."),r.a.createElement("h1",null,"Area Under Curve: ",r.a.createElement("span",{ref:this.areaRef})),"Back to ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:n},a)):r.a.createElement("div",null,r.a.createElement("br",null),"Back to ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:n},a),r.a.createElement(G.a,{onDrop:this.handleDrop,accept:"application/JSON, .json"},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t({className:"dropzone"}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drag'n'drop files, or click to select files (must be valid JSON file)"))})),r.a.createElement("div",null,r.a.createElement("strong",null,"Files:"),r.a.createElement("ul",null,this.state.fileNames.map((function(e){return r.a.createElement("li",{key:e},e)})))))}}]),a}(n.Component)),W=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper white"},r.a.createElement(i.b,{to:"/"},"Home"),r.a.createElement("br",null),e?"":r.a.createElement(i.b,{to:"/register"},"Register"),r.a.createElement("br",null),e?r.a.createElement(i.b,{to:"/dashboard"}," Dashboard "):r.a.createElement(i.b,{to:"/login"},"Login"))))}}]),a}(n.Component),H=Object(u.b)((function(e){return{auth:e.auth}}))(W),X=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return this.props.auth.isAuthenticated?r.a.createElement("div",{className:"container"},"Scientist: ",r.a.createElement("b",null,this.props.auth.user.username)):r.a.createElement("div",{className:"container"})}}]),a}(n.Component),Y=Object(u.b)((function(e){return{auth:e.auth}}),{})(X),J=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Welcome to Psych Researcher App!"))}}]),a}(n.Component),q=Object(u.b)((function(e){return{auth:e.auth}}),{})(J),z=a(20),Q=a.n(z),$=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){var e;return Object(D.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(S.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password,password2:e.state.password2};console.log(a),e.props.registerUser(a,e.props.history)},e.state={username:"",password:"",password2:"",errors:{}},e}return Object(A.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Register below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account?",r.a.createElement(i.b,{to:"/login"},"Log in")),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},"Username:",r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:Q()("",{invalid:e.userExists})}),r.a.createElement("span",{className:"red-text"},e.userExists),r.a.createElement("br",null),r.a.createElement("br",null),"Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:Q()("",{invalid:e.password})}),r.a.createElement("span",{className:"red-text"},e.password),r.a.createElement("br",null),r.a.createElement("br",null),"Confirm Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:Q()("",{invalid:e.password2})}),r.a.createElement("span",{className:"red-text"},e.password2),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn"},"Register")))}}]),a}(n.Component),K=Object(u.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){f.a.post("https://test-api-615.herokuapp.com/api/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(c.g)($)),Z=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){var e;return Object(D.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(S.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};console.log(a),e.props.loginUser(a)},e.state={username:"",password:"",errors:{}},e}return Object(A.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Log in"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},"Username:",r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,id:"username",type:"text",className:Q()("",{invalid:e.userNotFound})}),r.a.createElement("span",{className:"red-text"},e.userNotFound),r.a.createElement("br",null),r.a.createElement("br",null),"Password:",r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:Q()("",{invalid:e.pwdIncorrect})}),r.a.createElement("span",{className:"red-text"},e.pwdIncorrect),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Log in",class:"btn"})))}}]),a}(n.Component),ee=Object(u.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){f.a.post("https://test-api-615.herokuapp.com/api/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=h()(a);t(v(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}}})(Z),te=function(e,t){return function(a){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info/studyName-"+t).then((function(e){a({type:"GET_STUDY_INFO",payload:e.data.experiments})}))}},ae=(a(80),function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).onLogoutClick=function(e){e.preventDefault(),n.props.logoutUser()},n.state={studyName:""},n.onChange=n.onChange.bind(Object(T.a)(n)),n.onAddStudy=n.onAddStudy.bind(Object(T.a)(n)),n}return Object(A.a)(a,[{key:"onChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"componentWillMount",value:function(){var e=this.props.auth.user.username;this.props.getDBInfo(e)}},{key:"getStudyNames",value:function(){var e=this;return this.props.dataFlowDBInfo.map((function(t){if(Object.keys(t).includes("studyName")){var a="/"+e.props.auth.user.username+"/"+t.studyName;return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,t.studyName," ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:a},"View")))}}))}},{key:"onAddStudy",value:function(){var e=this.props.auth.user.username;this.props.addStudyName(e,this.state.studyName)}},{key:"render",value:function(){this.props.auth.user.username;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.onAddStudy},"Enter a name for your study: ",r.a.createElement("p",null,"  "),r.a.createElement("input",{type:"text",name:"studyName",value:this.state.studyName,onChange:this.onChange}),r.a.createElement("input",{type:"submit",value:"Add Study"})),r.a.createElement("form",null,r.a.createElement("br",null),this.getStudyNames(),r.a.createElement("br",null)),r.a.createElement("button",{onClick:this.onLogoutClick,className:"btn"},"Logout"))}}]),a}(n.Component)),ne=Object(u.b)((function(e){return{auth:e.auth,dataFlowDBInfo:e.dataFlow.dbInfo}}),{logoutUser:E,addStudyName:function(e,t){return function(a){var n={studyName:t,experiments:[]};f.a.post("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info",n).then((function(e){a({type:"ADD_STUDY_NAME",payload:e.data.studyName}),alert("Study ["+t+"] is created."),window.location.reload(!1)}))}},getDBInfo:function(e){return function(t){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/info").then((function(e){t({type:"GET_DB_INFO",payload:e.data})}))}}})(ae),re=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={},n.deployExpts=n.deployExpts.bind(Object(T.a)(n)),n}return Object(A.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.auth.user.username,t=this.props.match.params.studyName;this.props.getStudyInfo(e,t),this.props.getColNames(e)}},{key:"processColNames",value:function(){var e=this.props.match.params.studyName;return this.props.colNames.filter((function(e){return"info"!==e})).filter((function(t){return t.split("-")[0]==e})).map((function(e){return e.split("-")[1]}))}},{key:"getExptNames",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a=this.processColNames();return this.props.experiments.map((function(n){var s=n.exptName,o="/"+e+"/"+t+"/"+s+"/configs",c="/"+e+"/"+t+"/"+s+"/participantsData";return a.includes(s)?r.a.createElement("div",{className:"container"},n.exptName," ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:o},r.a.createElement("button",{type:"button"},"Experiment Configs"))," ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:c},r.a.createElement("button",{type:"button"},"View Participants Data"))):r.a.createElement("div",{className:"container"},n.exptName," ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:o},r.a.createElement("button",{type:"button"},"Experiment Configs")))}))}},{key:"deployExpts",value:function(){var e=this,t=this.props.auth.user.username,a=this.props.match.params.studyName,n=this.processColNames();this.props.experiments.map((function(e){return e.exptName})).filter((function(e){return!n.includes(e)})).forEach((function(n){e.props.createExptCol(t,a+"-"+n,n)}))}},{key:"deploy",value:function(){var e=this.processColNames(),t=this.props.experiments.map((function(e){return e.exptName})),a=t.filter((function(t){return!e.includes(t)}));return 0==t.length?r.a.createElement("div",{className:"container"},r.a.createElement("p",{style:{color:"grey"}},"No experiments.")):0==a.length?r.a.createElement("div",{className:"container"},r.a.createElement("p",{style:{color:"grey"}},"All experiments are deployed.")):r.a.createElement("div",{className:"container"},r.a.createElement("button",{class:"btn",onClick:this.deployExpts},"Deploy: ",r.a.createElement("b",null,a.map((function(e){return r.a.createElement("p",null,e," ")})))))}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t+"/exptBuilder",n="/"+e+"/"+t+"/normalCurves",s=this.processColNames();this.props.experiments.map((function(e){return e.exptName})).filter((function(e){return!s.includes(e)}));return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("b",null,this.props.match.params.studyName),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(i.b,{to:a},"Build an Experiment"),r.a.createElement("br",null),r.a.createElement(i.b,{to:n},"Build a normal curve item"),r.a.createElement("form",null,r.a.createElement("br",null),"Your Experiments",r.a.createElement("br",null),r.a.createElement("br",null),this.getExptNames(),r.a.createElement("br",null),r.a.createElement("br",null),this.deploy(),r.a.createElement("br",null)))}}]),a}(n.Component),se=Object(u.b)((function(e){return{auth:e.auth,experiments:e.dataFlow.studyInfo,colNames:e.dataFlow.colNames}}),{getStudyInfo:te,createExptCol:function(e,t,a){return function(n){f.a.post("https://test-api-615.herokuapp.com/api/"+e+"/createCol/"+t).then((function(e){alert("Experiment ["+a+"] is deployed."),window.location.reload(!1)}))}},getColNames:function(e){return function(t){f.a.get("https://test-api-615.herokuapp.com/api/"+e+"/collections").then((function(e){t({type:"GET_COL_NAMES",payload:e.data})}))}}})(re),oe=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName;this.props.getStudyInfo(e,t)}},{key:"showExptData",value:function(){var e=this.props.match.params.exptName;if(0==!this.props.experiments.length){var t=this.props.experiments.find((function(t){return t.exptName==e}));return Object.keys(t).filter((function(e){return"userID"!=e&&"count"!=e&&"type"!=e&&"exptName"!=e})).map((function(e){var a=JSON.stringify(t[e]);return r.a.createElement("div",null,a)}))}}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t;return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("br",null),"Back to ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:a},t),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Configuration data: "),r.a.createElement("br",null),r.a.createElement("br",null),this.showExptData())}}]),a}(n.Component),ie=Object(u.b)((function(e){return{auth:e.auth,experiments:e.dataFlow.studyInfo}}),{getStudyInfo:te})(oe),ce=function(e){Object(I.a)(a,e);var t=Object(M.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName+"-"+this.props.match.params.exptName;this.props.getPartData(e,t)}},{key:"showPartData",value:function(){var e=JSON.stringify(this.props.partData);return r.a.createElement("div",{className:"container"},e)}},{key:"render",value:function(){var e=this.props.match.params.username,t=this.props.match.params.studyName,a="/"+e+"/"+t;return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("br",null),"Back to ",r.a.createElement("p",null," "),r.a.createElement(i.b,{to:a},t),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Participants data: "),r.a.createElement("br",null),r.a.createElement("br",null),this.showPartData())}}]),a}(n.Component),le=Object(u.b)((function(e){return{auth:e.auth,partData:e.dataFlow.partData}}),{getPartData:function(e,t){return function(a){f.a.get("https://test-api-615.herokuapp.com/api/feedback/"+e+"/"+t).then((function(e){a({type:"GET_PART_DATA",payload:e.data})}))}}})(ce);if(localStorage.jwtToken){var ue=localStorage.jwtToken;b(ue);var pe=h()(ue);R.dispatch(v(pe));var me=Date.now()/1e3;pe.exp<me&&(R.dispatch(E()),window.location.href="./login")}var he=function(){return r.a.createElement(u.a,{store:R},r.a.createElement(i.a,{basename:"/survey-builder/"},r.a.createElement("div",{className:"App"},r.a.createElement(H,null),r.a.createElement("br",null),r.a.createElement(Y,null),r.a.createElement(c.b,{exact:!0,path:"/",component:q}),r.a.createElement(c.b,{exact:!0,path:"/register",component:K}),r.a.createElement(c.b,{exact:!0,path:"/login",component:ee}),r.a.createElement(c.d,null,r.a.createElement(p,{exact:!0,path:"/dashboard",component:ne}),r.a.createElement(p,{exact:!0,path:"/:expt/participantsData",component:le}),r.a.createElement(p,{exact:!0,path:"/:username/:studyName",component:se}),r.a.createElement(p,{exact:!0,path:"/:username/:studyName/exptBuilder",component:B}),r.a.createElement(p,{exact:!0,path:"/:username/:studyName/normalCurves",component:L}),r.a.createElement(p,{exact:!0,path:"/:username/:studyName/:exptName/configs",component:ie}),r.a.createElement(p,{exact:!0,path:"/:username/:studyName/:exptName/participantsData",component:le})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.62ed2ea1.chunk.js.map